{% extends 'base.html' %}

{% block titulo %} REGISTRO {% endblock %}

{% block contenido %}
<div class="container-fluid vh-100" style="background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);">
    <div class="container h-100 d-flex justify-content-center align-items-center">
        <div class="card shadow-lg rounded-4" style="width: 900px; max-width: 95%; overflow: hidden;">
            <div class="row g-0">

                <!-- Panel izquierdo decorativo -->
                <div class="col-md-6 d-none d-md-flex" style="background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); justify-content: center; align-items: center;">
                    <div class="text-center p-5">
                        <img src="{{ url_for('static', filename='inicio.png') }}" class="img-fluid rounded-circle shadow-lg mb-4" style="width: 250px; height: 250px; object-fit: cover;">
                        <h2 class="fw-bold text-white mb-2">¡Bienvenido!</h2>
                        <p class="text-white mb-4">Únete y descubre nuestras funcionalidades modernas.</p>
                        <a href="{{ url_for('login') }}" class="btn btn-light btn-lg fw-bold shadow-sm" 
                           style="transition: all 0.3s;" 
                           onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.4)';"
                           onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.2)';">
                            Iniciar Sesión
                        </a>
                    </div>
                </div>

                <!-- Panel derecho (formulario) -->
                <div class="col-md-6 d-flex align-items-center" style="background-color: #fff;">
                    <div class="card-body p-5">
                        <h2 class="fw-bold text-center mb-4" style="color: #a18cd1;">Registro</h2>

                        <form id="registroForm" action="{{ url_for('Registro') }}" method="POST">

                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Nombre completo">
                                <label for="nombre">Nombre completo</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="email" class="form-control" id="email" name="email" placeholder="Correo electrónico">
                                <label for="email">Correo electrónico</label>
                            </div>

                            <div class="form-floating mb-3">
                                <input type="password" class="form-control" id="password" name="password" placeholder="Contraseña">
                                <label for="password">Contraseña</label>
                            </div>

                            <div class="form-floating mb-3">
                                <select class="form-select" id="rol" name="id_rol">
                                    <option value="2" selected>Cliente</option>
                                    <option value="1">Administrador</option>
                                </select>
                                <label for="rol">Selecciona tu rol</label>
                            </div>

                            <div class="d-grid mb-3">
                                <button type="submit" class="btn btn-gradient btn-lg fw-bold shadow-sm" 
                                        style="background: linear-gradient(135deg, #ff512f, #dd2476); color:white; transition: all 0.3s;"
                                        onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.4)';"
                                        onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.2)';">
                                    Registrarse
                                </button>
                            </div>
                        </form>

                        <p class="text-center text-muted mt-3">¿Ya tienes cuenta? <a href="{{ url_for('login') }}">Inicia sesión</a></p>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.getElementById('registroForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const nombre = document.getElementById('nombre').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value.trim();
    const rol = document.getElementById('rol').value;

    if(!nombre || !email || !password || !rol) {
        Swal.fire({
            icon: 'warning',
            title: '¡Atención!',
            text: 'Todos los campos son obligatorios.',
            confirmButtonColor: '#a18cd1',
            background: '#fff url(https://www.transparenttextures.com/patterns/pw-maze-white.png)',
            backdrop: `
                rgba(0,0,123,0.4)
                url("https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif")
                left top
                no-repeat
            `
        });
        return;
    }

    this.submit();
});
</script>

<style>
.form-control:focus, .form-select:focus {
    border-color: #a18cd1;
    box-shadow: 0 0 0 0.25rem rgba(161,140,209,0.25);
}

.btn-gradient {
    border-radius: 50px;
}

</style>
{% endblock %}
