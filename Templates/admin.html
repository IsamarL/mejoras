{% extends 'baseadmin.html' %}

{% block title %}Panel de Administración{% endblock %}

{% block body %}

<!-- Mensajes flash con SweetAlert2 -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class="flashes">
      {% for category, message in messages %}
        <script type="text/javascript">
          const Toast = Swal.mixin({
            toast: true,
            position: "top-end",
            showConfirmButton: false,
            timer: 2000,
            timerProgressBar: true,
            didOpen: (toast) => {
              toast.onmouseenter = Swal.stopTimer;
              toast.onmouseleave = Swal.resumeTimer;
            }
          });
          Toast.fire({
            icon: "{{ category }}",
            title: "{{ message }}"
          });
        </script>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<!-- Confirmación de eliminación con SweetAlert2 -->
<script>
  function confirmarEliminacion(url) {
    Swal.fire({
      title: '¿Estás seguro?',
      text: "¡No podrás revertir esto!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#3085d6',
      confirmButtonText: 'Sí, eliminar',
      cancelButtonText: 'Cancelar'
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = url;
      }
    });
  }
</script>

<!-- Animaciones CSS -->
<style>
.card:hover {
    transform: translateY(-10px);
    transition: transform 0.3s ease-in-out;
}
.card i {
    transition: transform 0.3s ease-in-out;
}
.card:hover i {
    transform: scale(1.3);
}
</style>

<div class="container p-5 mt-3">
  <h2 class="text-center alert alert-danger py-4">Sistema de Gestión de Productos</h2>
  <div class="row text-center">

    <!-- Card Usuarios -->
    <div class="col-sm-4 mb-3 mb-sm-0">
      <div class="card shadow-sm" style="background: linear-gradient(180deg, #68f5e9, #f3c6d3, #f1eeda);">
        <div class="card-body">
          <h5 class="card-title">
            <i class="bi bi-people-fill" style="font-size:2rem; color:#333;"></i> Usuarios Registrados
          </h5>
          <p class="display-6">{{ total_usuarios }}</p>
          <a href="{{ url_for('listar') }}" class="btn btn-outline-success">Ver Detalles</a>
        </div>
      </div>
    </div>

    <!-- Card Registrar Productos -->
    <div class="col-sm-4 mb-3 mb-sm-0">
      <div class="card shadow-sm" style="background: linear-gradient(180deg, #e8fcb3,#9ff5b1,#ffffff);">
        <div class="card-body">
          <h5 class="card-title">
            <i class="bi bi-plus-circle-fill" style="font-size:2rem; color:#333;"></i> Registrar Productos
          </h5>
          <a href="{{ url_for('listar_productos_agregados') }}" class="btn btn-outline-success">Agregar</a>
        </div>
      </div>
    </div>

    <!-- Card Productos Agregados -->
    <div class="col-sm-4 mb-3 mb-sm-0">
      <div class="card shadow-sm" style="background: linear-gradient(180deg, #f6f897,#e99494,#e0f7ff);">
        <div class="card-body">
          <h5 class="card-title">
            <i class="bi bi-box-seam" style="font-size:2rem; color:#333;"></i> Productos Agregados
          </h5>
          <p class="display-6">{{ total_productos }}</p>
          <a href="{{ url_for('listar_productos') }}" class="btn btn-outline-success">Ver Detalles</a>
        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}
